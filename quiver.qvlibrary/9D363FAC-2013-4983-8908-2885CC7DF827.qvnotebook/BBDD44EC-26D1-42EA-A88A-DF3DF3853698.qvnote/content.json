{
  "title": "ntpdate",
  "cells": [
    {
      "type": "text",
      "data": "<div class=\"para\" label-module=\"para\" style=\"font-size: 14px; word-wrap: break-word; margin-bottom: 15px; text-indent: 28px; line-height: 24px; zoom: 1; font-family: arial, 宋体, sans-serif; widows: 1; background-color: rgb(255, 255, 255);\">NTP是网络时间协议(Network Time Protocol)，它是用来同步网络中各个计算机的时间的协议。</div><div class=\"para\" label-module=\"para\" style=\"font-size: 14px; word-wrap: break-word; margin-bottom: 15px; text-indent: 28px; line-height: 24px; zoom: 1; font-family: arial, 宋体, sans-serif; widows: 1; background-color: rgb(255, 255, 255);\">在计算机的世界里，时间非常地重要，例如对于火箭发射这种科研活动，对时间的统一性和准确性要求就非常地高，是按照A这台计算机的时间，还是按照B这台计算机的时间？NTP就是用来解决这个问题的，NTP（Network Time Protocol，网络时间协议）是用来使网络中的各个计算机时间同步的一种协议。它的用途是把计算机的时钟同步到<a target=\"_blank\" href=\"http://baike.baidu.com/view/2915317.htm\" style=\"color: rgb(19, 110, 194); text-decoration: none;\">世界协调时</a>UTC，其精度在局域网内可达0.1ms，在互联网上绝大多数的地方其精度可以达到1-50ms。</div><div class=\"para\" label-module=\"para\" style=\"font-size: 14px; word-wrap: break-word; margin-bottom: 15px; text-indent: 28px; line-height: 24px; zoom: 1; font-family: arial, 宋体, sans-serif; widows: 1; background-color: rgb(255, 255, 255);\">它可以使计算机对其服务器或时钟源（如石英钟，GPS等等）进行时间同步，它可以提供高精准度的时间校正，而且可以使用加密确认的方式来防止恶毒的协议攻击。</div><div class=\"para\" label-module=\"para\" style=\"font-size: 14px; word-wrap: break-word; margin-bottom: 15px; text-indent: 28px; line-height: 24px; zoom: 1; font-family: arial, 宋体, sans-serif; widows: 1; background-color: rgb(255, 255, 255);\"><div class=\"para\" label-module=\"para\" style=\"word-wrap: break-word; margin-bottom: 15px; text-indent: 2em; line-height: 24px; zoom: 1;\">NTP要提供准确的时间，就必须有准确的时间来源，那可以用格林尼治时间吗？答案是否定的。因为格林尼治时间是以地球自转为基础的时间计量系统，但是地球每天的自转是有些不规则的，而且正在缓慢减速，因此，格林尼治时间已经不再被作为标准时间使用。</div><div class=\"para\" label-module=\"para\" style=\"word-wrap: break-word; margin-bottom: 15px; text-indent: 2em; line-height: 24px; zoom: 1;\">新的标准时间，是由<a target=\"_blank\" href=\"http://baike.baidu.com/view/41663.htm\" style=\"color: rgb(19, 110, 194); text-decoration: none;\">原子钟</a>报时的国际标准时间UTC（Universal Time Coordinated，世界协调时）。所以NTP获得UTC的时间来源可以是原子钟、天文台、卫星，也可以从Internet上获取。</div><div class=\"para\" label-module=\"para\" style=\"word-wrap: break-word; margin-bottom: 15px; text-indent: 2em; line-height: 24px; zoom: 1;\">有了准确而可靠的的时间源，那这个时间如何传播呢？在NTP中，定义了时间按照服务器的等级传播，按照离外部UTC源远近将所有的服务器归入不同的Stratum（层）中，例如把通过GPS（Global Positioning System，全球定位系统）取得发送标准时间的服务器叫Stratum-1的NTP服务器，而Stratum-2则从Stratum-1获取时间，Stratum-3从Stratum-2获取时间，以此类推，但Stratum层的总数限制在15以内。所有这些<a target=\"_blank\" href=\"http://baike.baidu.com/view/899.htm\" style=\"color: rgb(19, 110, 194); text-decoration: none;\">服务器</a>在逻辑上形成阶梯式的架构相互连接，而Stratum-1的<a target=\"_blank\" href=\"http://baike.baidu.com/view/922844.htm\" style=\"color: rgb(19, 110, 194); text-decoration: none;\">时间服务器</a>是整个系统的基础，这种阶梯式的架构示意图如图1所示。</div><div class=\"para\" label-module=\"para\" style=\"word-wrap: break-word; margin-bottom: 15px; text-indent: 2em; line-height: 24px; zoom: 1;\"><div class=\"para\" label-module=\"para\" style=\"word-wrap: break-word; margin-bottom: 15px; text-indent: 2em; line-height: 24px; zoom: 1;\">计算机主机一般同多个时钟服务器连接，利用统计学的算法过滤来自不同服务器的时间，以选择最佳的路径和来源以便校正主机时间。即使在主机长时间无法与某一时钟服务器联系的情况下，NTP服务依然可以有效运转。</div><div class=\"para\" label-module=\"para\" style=\"word-wrap: break-word; margin-bottom: 15px; text-indent: 2em; line-height: 24px; zoom: 1;\">为了防止对时钟服务器的恶意破坏，NTP使用了识别机制，检查发送来的信息是否是真正来自所宣称的时钟服务器并检查信息的返回路径，以提供对抗干扰的保护机制。<span style=\"font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em; white-space: nowrap; margin-left: 2px; color: rgb(51, 102, 204); cursor: default; padding: 0px 2px;\">[1]</span><a class=\"sup-anchor\" name=\"ref_[1]_60648\" style=\"color: rgb(19, 110, 194); position: relative; top: -50px; font-size: 0px; line-height: 0;\">&nbsp;</a><a name=\"ref_1\" style=\"color: rgb(19, 110, 194);\"></a><a name=\"ref_1\" style=\"color: rgb(19, 110, 194);\"></a></div><div class=\"para\" label-module=\"para\" style=\"word-wrap: break-word; margin-bottom: 15px; text-indent: 2em; line-height: 24px; zoom: 1;\">NTP时间同步报文中包含的时间是格林威治时间，是从1900年开始计算的秒数。</div></div></div>"
    }
  ]
}