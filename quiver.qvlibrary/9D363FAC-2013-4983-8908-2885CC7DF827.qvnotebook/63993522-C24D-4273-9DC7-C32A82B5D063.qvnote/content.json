{
  "title": "centos升级内核",
  "cells": [
    {
      "type": "text",
      "data": "<p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">1.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">下载源码包</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">网址：</span></span></span><span style=\"padding: 0px; margin: 0px; color: rgb(0, 0, 128);\"><span lang=\"zxx\" style=\"padding: 0px; margin: 0px;\"><u style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">http://www.kernel.org</span></span></u></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">在首页可以看到有</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;stable</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">，</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">longterm</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;等版本，一般选择下载</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;longterm</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;版本，因为此版本为提供长期支持的稳定版，因此我选择</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;3.12.16.</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# wget https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.12.16.tar.xz</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">2.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">解压并进入目录</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# tar -xf linux-3.12.16.tar.xz</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# cd linux-3.12.16</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">3.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">更新当前系统</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# yum update</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# yum upgrade</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">4.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">安装编译内核所需要的软件包</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# yum groupinstall “Development Tools”</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# yum install ncurses-devel</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# yum install qt-devel</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# yum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">5.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">查看当前系统内核</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# uname -r</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><code class=\"western\" style=\"padding-top: 0px; padding-bottom: 0px;\"><span style=\"padding: 0px; margin: 0px;\">2.6.32-358.11.1.el6.x86_64</span></code></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">6.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">将当前系统内核的配置文件拷贝到当前目录</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]#</span></span><code class=\"western\" style=\"padding-top: 0px; padding-bottom: 0px;\"><span style=\"padding: 0px; margin: 0px;\">&nbsp;cp /boot/config-2.6.32-358.11.1.el6.x86_64 .config</span></code></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">7.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">使用当前系统内核配置，并自动接受每个新增选项的默认设置</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# sh -c ' yes “” | make oldconfig'</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">8.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">编译</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# make bzImage</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# make modules</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# make modules_install</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">9.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">安装</span></span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# make install</span></span></p><p align=\"LEFT\" class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">如果出现少量</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;ERROR</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;可以忽略</span></span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">10.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">修改</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;Grub</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;引导顺序</span></span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# vim /etc/grub.conf</span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">一般新内核的位置都在第一个，所以设置</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;default=0.</span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">11.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">重启后查看内核版本号</span></span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# uname -r</span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">3.12.16</span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">12.</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">如果失败，转至第</span></span></span><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;5</span></span><span style=\"padding: 0px; margin: 0px; font-family: 'AR PL UMing HK';\"><span lang=\"zh-CN\" style=\"padding: 0px; margin: 0px;\"><span style=\"padding: 0px; margin: 0px; font-size: 18px;\">&nbsp;步，在重新开始之前，需要清理上次编译的现场</span></span></span></p><p class=\"western\" style=\"padding: 0px; margin: 0px 0px 0in; font-size: 14px; widows: 1; font-family: Arial; line-height: 26px; background-color: rgb(255, 255, 255);\"><span style=\"padding: 0px; margin: 0px; font-family: Sans, sans-serif;\"><span style=\"padding: 0px; margin: 0px; font-size: 12px;\">[root@CentOS-BinaryDev~]# make mrproper</span></span></p>"
    }
  ]
}