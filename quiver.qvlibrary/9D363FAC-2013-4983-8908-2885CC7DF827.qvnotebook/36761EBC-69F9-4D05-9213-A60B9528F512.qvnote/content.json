{
  "title": "yum",
  "cells": [
    {
      "type": "text",
      "data": "<span style=\"color: rgb(102, 102, 102); font-family: 宋体, Arial; line-height: 26px; widows: 1; background-color: rgb(255, 255, 255);\">yum-fastestmirror 可以加快yum速度</span>"
    },
    {
      "type": "text",
      "data": "<p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><strong style=\"margin: 0px; padding: 0px; color: rgb(128, 0, 0); font-size: 16px;\">一、yum 简介</strong></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">　　yum，是Yellow dog Updater, Modified 的简称，是杜克大学为了提高RPM 软件包安装性而开发的一种软件包管理器。起初是由yellow dog 这一发行版的开发者Terra Soft 研发，用python 写成，那时还叫做yup(yellow dog updater)，后经杜克大学的Linux@Duke 开发团队进行改进，遂有此名。yum 的宗旨是自动化地升级，安装/移除rpm 包，收集rpm 包的相关信息，检查依赖性并自动提示用户解决。yum 的关键之处是要有可靠的repository，顾名思义，这是软件的仓库，它可以是http 或ftp 站点，也可以是本地软件池，但必须包含rpm 的header，header 包括了rpm 包的各种信息，包括描述，功能，提供的文件，依赖性等。正是收集了这些header 并加以分析，才能自动化地完成余下的任务。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">　　yum 的理念是使用一个中心仓库(repository)管理一部分甚至一个distribution 的应用程序相互关系，根据计算出来的软件依赖关系进行相关的升级、安装、删除等等操作，减少了Linux 用户一直头痛的dependencies 的问题。这一点上，yum 和apt 相同。apt 原为debian 的deb 类型软件管理所使用，但是现在也能用到RedHat 门下的rpm 了。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">　　yum 主要功能是更方便的添加/删除/更新RPM 包，自动解决包的倚赖性问题，便于管理大量系统的更新问题。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">　　yum 可以同时配置多个资源库(Repository)，简洁的配置文件（/etc/yum.conf），自动解决增加或删除rpm 包时遇到的依赖性问题，保持与RPM 数据库的一致性。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 0); font-size: 16px;\"><strong style=\"margin: 0px; padding: 0px;\">二、yum 安装</strong></span></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">CentOS 默认已经安装了yum，不需要另外安装，这里为了实验目的，先将yum 卸载再重新安装。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">1、查看系统默认安装的yum</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># rpm -qa | grep yum</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/35C44DC0EAA960314C5B65AA02A198BB.jpg\" alt=\"\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">2、卸载yum</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># rpm -e yum-fastestmirror-1.1.16-14.el5.centos.1 yum-metadata-parser-1.1.2-3.el5.centos yum-3.2.22-33.el5.centos</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/31AF589C5D8BCFBD9E3A1E1EC1D5F02C.jpg\" alt=\"\" width=\"900\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">3、重新安装yum</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">这里可以通过wget 从网上下载相关包安装，也可以挂载系统安装光盘进行安装，这里选择挂载系统安装光盘进行安装。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># mount /dev/cdrom /mnt/cdrom/</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># rpm -ivh yum-3.2.22-33.el5.centos.noarch.rpm yum-fastestmirror-1.1.16-14.el5.centos.1.noarch.rpm yum-metadata-parser-1.1.2-3.el5.centos.i386.rpm</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># yum -v</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">yum 的基础安装包包括：</p><ul style=\"margin: 0px 0px 0px 30px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><li style=\"margin: 0px; padding: 0px; list-style: disc;\">yum　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//RPM installer/updater</li><li style=\"margin: 0px; padding: 0px; list-style: disc;\">yum-fastestmirror　　 &nbsp; &nbsp; &nbsp;//Yum plugin which chooses fastest repository from a mirrorlist</li><li style=\"margin: 0px; padding: 0px; list-style: disc;\">yum-metadata-parser　　//A fast metadata parser for yum</li></ul><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">其他安装包根据自己需要安装。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/7D93CF01A18A61F436E454118590A0DF.jpg\" alt=\"\" width=\"900\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 0); font-size: 16px;\"><strong style=\"margin: 0px; padding: 0px;\">三、yum 配置</strong></span></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">yum 的配置文件分为两部分：main 和repository</p><ul style=\"margin: 0px 0px 0px 30px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><li style=\"margin: 0px; padding: 0px; list-style: disc;\">main 部分定义了全局配置选项，整个yum 配置文件应该只有一个main。常位于/etc/yum.conf 中。</li><li style=\"margin: 0px; padding: 0px; list-style: disc;\">repository 部分定义了每个源/服务器的具体配置，可以有一到多个。常位于/etc/yum.repo.d 目录下的各文件中。</li></ul><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">yum.conf 文件一般位于/etc目录下，一般其中只包含main部分的配置选项。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># cat /etc/yum.conf</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\">[main]\ncachedir=/var/cache/yum<br style=\"margin: 0px; padding: 0px;\">　　//yum 缓存的目录，yum 在此存储下载的rpm 包和数据库，默认设置为/var/cache/yum\nkeepcache=0<br style=\"margin: 0px; padding: 0px;\">　　//安装完成后是否保留软件包，0为不保留（默认为0），1为保留\ndebuglevel=2<br style=\"margin: 0px; padding: 0px;\">　　//Debug 信息输出等级，范围为0-10，缺省为2\nlogfile=/var/log/yum.log<br style=\"margin: 0px; padding: 0px;\">　　//yum 日志文件位置。用户可以到/var/log/yum.log 文件去查询过去所做的更新。\npkgpolicy=newest<br style=\"margin: 0px; padding: 0px;\">　　//包的策略。一共有两个选项，newest 和last，这个作用是如果你设置了多个repository，而同一软件在不同的repository 中同时存在，yum 应该安装哪一个，如果是newest，则yum 会安装最新的那个版本。如果是last，则yum 会将服务器id 以字母表排序，并选择最后的那个服务器上的软件安装。一般都是选newest。<br style=\"margin: 0px; padding: 0px;\">distroverpkg=redhat-release<br style=\"margin: 0px; padding: 0px;\">　　//指定一个软件包，yum 会根据这个包判断你的发行版本，默认是redhat-release，也可以是安装的任何针对自己发行版的rpm 包。\ntolerant=1<br style=\"margin: 0px; padding: 0px;\">　　//有1和0两个选项，表示yum 是否容忍命令行发生与软件包有关的错误，比如你要安装1,2,3三个包，而其中3此前已经安装了，如果你设为1,则yum 不会出现错误信息。默认是0。\nexactarch=1<br style=\"margin: 0px; padding: 0px;\">　　//有1和0两个选项，设置为1，则yum 只会安装和系统架构匹配的软件包，例如，yum 不会将i686的软件包安装在适合i386的系统中。默认为1。\nretries=6<br style=\"margin: 0px; padding: 0px;\">　　//网络连接发生错误后的重试次数，如果设为0，则会无限重试。默认值为6.<br style=\"margin: 0px; padding: 0px;\">obsoletes=1<br style=\"margin: 0px; padding: 0px;\">　　//这是一个update 的参数，具体请参阅yum(8)，简单的说就是相当于upgrade，允许更新陈旧的RPM包。\nplugins=1<br style=\"margin: 0px; padding: 0px;\">　　//是否启用插件，默认1为允许，0表示不允许。我们一般会用yum-fastestmirror这个插件。\nbugtracker_url=http://bugs.centos.org/set_project.php?project_id=16&amp;ref=http://bugs.centos.org/bug_report_page.php?category=yum\n\n# Note: yum-RHN-plugin doesn't honor this.\nmetadata_expire=1h\n\ninstallonly_limit = 5\n\n# PUT YOUR REPOS HERE OR IN separate files named file.repo\n# in /etc/yum.repos.d</pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">除了上述之外，还有一些可以添加的选项，如：</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">　　exclude=selinux*　　//&nbsp;排除某些软件在升级名单之外，可以用通配符，列表中各个项目要用空格隔开，这个对于安装了诸如美化包，中文补丁的朋友特别有用。<br style=\"margin: 0px; padding: 0px;\">　　gpgcheck=1　　//&nbsp;有1和0两个选择，分别代表是否是否进行gpg(GNU Private Guard) 校验，以确定rpm 包的来源是有效和安全的。这个选项如果设置在[main]部分，则对每个repository 都有效。默认值为0。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 0); font-size: 16px;\"><strong style=\"margin: 0px; padding: 0px;\">四、配置本地yum源</strong></span></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">1、挂载系统安装光盘</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># mount /dev/cdrom /mnt/cdrom/</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">2、配置本地yum源</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># cd /etc/yum.repos.d/</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># ls</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">会看到四个repo 文件</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/B52E3F69B99BE69F68F3F91648755C01.jpg\" alt=\"\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">CentOS-Base.repo&nbsp;是yum 网络源的配置文件</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">CentOS-Media.repo 是yum&nbsp;本地源的配置文件</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">修改CentOS-Media.repo</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># cat CentOS-Media.repo</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\"># CentOS-Media.repo\n#\n# This repo is used to mount the default locations for a CDROM / DVD on\n#  CentOS-5.  You can use this repo and yum to install items directly off the\n#  DVD ISO that we release.\n#\n# To use this repo, put in your DVD and use it with the other repos too:\n#  yum --enablerepo=c5-media [command]\n#  \n# or for ONLY the media repo, do this:\n#\n#  yum --disablerepo=\\* --enablerepo=c5-media [command]\n \n[c5-media]\nname=CentOS-$releasever - Media\nbaseurl=file:///media/CentOS/\n        file:///mnt/cdrom/\n        file:///media/cdrecorder/\ngpgcheck=1\nenabled=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5</pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">在baseurl 中修改第2个路径为/mnt/cdrom（即为光盘挂载点）</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">将enabled=0改为1</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">3、禁用默认的yum 网络源</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">将yum 网络源配置文件改名为CentOS-Base.repo.bak，否则会先在网络源中寻找适合的包，改名之后直接从本地源读取。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">4、执行yum 命令</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># yum install postgresql</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/9A1B54936281749F974D74522D8B9689.jpg\" alt=\"\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/A77EE3C139E2EAD72614A7831A9F3780.jpg\" alt=\"\" width=\"900\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><strong style=\"margin: 0px; padding: 0px;\">关于repo 文件的格式</strong></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">所有repository&nbsp;服务器设置都应该遵循如下格式：</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\">[serverid]\nname=Some name for this server\nbaseurl=url://path/to/repository/</pre></div><ul style=\"margin: 0px 0px 0px 30px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><li style=\"margin: 0px; padding: 0px; list-style: disc;\">serverid 是用于区别各个不同的repository，必须有一个独一无二的名称；</li><li style=\"margin: 0px; padding: 0px; list-style: disc;\">name 是对repository 的描述，支持像$releasever $basearch这样的变量；</li><li style=\"margin: 0px; padding: 0px; list-style: disc;\">baseurl 是服务器设置中最重要的部分，只有设置正确，才能从上面获取软件。它的格式是：</li></ul><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\">baseurl=url://server1/path/to/repository/\n　　　　 url://server2/path/to/repository/\n　　　　 url://server3/path/to/repository/</pre></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">其中url 支持的协议有 http:// ftp://&nbsp;file://&nbsp;三种。baseurl 后可以跟多个url，你可以自己改为速度比较快的镜像站，但baseurl 只能有一个，也就是说不能像如下格式：</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\">baseurl=url://server1/path/to/repository/\nbaseurl=url://server2/path/to/repository/\nbaseurl=url://server3/path/to/repository/</pre></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">其中url 指向的目录必须是这个repository header 目录的上一级，它也支持$releasever $basearch 这样的变量。<br style=\"margin: 0px; padding: 0px;\">url 之后可以加上多个选项，如gpgcheck、exclude、failovermethod 等，比如：</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\">[updates-released]\nname=Fedora Core $releasever - $basearch - Released Updates\nbaseurl=http://download.atrpms.net/mirrors/fedoracore/updates/$releasever/$basearch\n　　　　 http://redhat.linux.ee/pub/fedora/linux/core/updates/$releasever/$basearch\n　　　　 http://fr2.rpmfind.net/linux/fedora/core/updates/$releasever/$basearch\ngpgcheck=1\nexclude=gaim\nfailovermethod=priority</pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">其中gpgcheck，exclude 的含义和[main] 部分相同，但只对此服务器起作用，failovermethode 有两个选项roundrobin 和priority，意思分别是有多个url可供选择时，yum 选择的次序，roundrobin 是随机选择，如果连接失败则使用下一个，依次循环，priority 则根据url 的次序从第一个开始。如果不指明，默认是roundrobin。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8; font-size: 16px; color: rgb(128, 0, 0);\"><strong style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">五、配置国内yum源</span></strong></span></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">系统默认的yum 源速度往往不尽人意，为了达到快速安装的目的，在这里修改yum源为国内源。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">上海交通大学yum源</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">a. 修改/etc/yum.repos.d/CentOS-Base.repo为：</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\"># CentOS-Base.repo\n#\n# The mirror system uses the connecting IP address of the client and the\n# update status of each mirror to pick mirrors that are updated to and\n# geographically close to the client.  You should use this for CentOS updates\n# unless you are manually picking other mirrors.\n#\n# If the mirrorlist= does not work for you, as a fall back you can try the \n# remarked out baseurl= line instead.\n#\n#\n\n[base]\nname=CentOS-$releasever - Base\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os\nbaseurl=http://ftp.sjtu.edu.cn/centos/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5\n\n#released updates \n[updates]\nname=CentOS-$releasever - Updates\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates\nbaseurl=http://ftp.sjtu.edu.cn/centos/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5\n\n#additional packages that may be useful\n[extras]\nname=CentOS-$releasever - Extras\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras\nbaseurl=http://ftp.sjtu.edu.cn/centos/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5\n\n#additional packages that extend functionality of existing packages\n[centosplus]\nname=CentOS-$releasever - Plus\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus\nbaseurl=http://ftp.sjtu.edu.cn/centos/$releasever/centosplus/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5\n\n#contrib - packages by Centos Users\n[contrib]\nname=CentOS-$releasever - Contrib\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=contrib\nbaseurl=http://ftp.sjtu.edu.cn/centos/$releasever/contrib/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5</pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">关于变量</p><ul style=\"margin: 0px 0px 0px 30px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><li style=\"margin: 0px; padding: 0px; list-style: disc;\">$releasever：代表发行版的版本，从[main]部分的distroverpkg获取，如果没有，则根据redhat-release包进行判断。</li><li style=\"margin: 0px; padding: 0px; list-style: disc;\">$arch：cpu体系，如i686,athlon等</li><li style=\"margin: 0px; padding: 0px; list-style: disc;\">$basearch：cpu的基本体系组，如i686和athlon同属i386，alpha和alphaev6同属alpha。</li></ul><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">b.&nbsp;导入GPG KEY</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">yum 可以使用gpg 对包进行校验，确保下载包的完整性，所以我们先要到各个repository 站点找到gpg key，一般都会放在首页的醒目位置，一些名字诸如RPM-GPG-KEY-CentOS-5 之类的纯文本文件，把它们下载下来，然后用rpm --import RPM-GPG-KEY-CentOS-5&nbsp;命令将key 导入。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">c.&nbsp;执行yum 命令</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/FA3D79B7DCBADCCF6117CD96E18F964B.jpg\" alt=\"\" width=\"900\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">其他国内yum源列表如下：</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">1. 企业贡献：</span><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">搜狐开源镜像站：</span><a href=\"http://mirrors.sohu.com/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors.sohu.com/</a><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">网易开源镜像站：</span><a href=\"http://mirrors.163.com/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors.163.com/</a></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">2. 大学教学：</span><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">北京理工大学：</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirror.bit.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror.bit.edu.cn</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv4 only)</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirror.bit6.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror.bit6.edu.cn</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv6 only)</span><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">北京交通大学：</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirror.bjtu.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror.bjtu.edu.cn</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv4 only)</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirror6.bjtu.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror6.bjtu.edu.cn</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv6 only)</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://debian.bjtu.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://debian.bjtu.edu.cn</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv4+IPv6)</span><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">兰州大学：</span><a href=\"http://mirror.lzu.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror.lzu.edu.cn/</a><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">厦门大学：</span><a href=\"http://mirrors.xmu.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors.xmu.edu.cn/</a><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">清华大学：</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirrors.tuna.tsinghua.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors.tuna.tsinghua.edu.cn/</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv4+IPv6)</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirrors.6.tuna.tsinghua.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors.6.tuna.tsinghua.edu.cn/</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv6 only)</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirrors.4.tuna.tsinghua.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors.4.tuna.tsinghua.edu.cn/</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv4 only)</span><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">天津大学：</span><a href=\"http://mirror.tju.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror.tju.edu.cn/</a><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">中国科学技术大学：</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirrors.ustc.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors.ustc.edu.cn/</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv4+IPv6)</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirrors4.ustc.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors4.ustc.edu.cn/</a><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirrors6.ustc.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirrors6.ustc.edu.cn/</a><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">东北大学：</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirror.neu.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror.neu.edu.cn/</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv4 only)</span><br style=\"margin: 0px; padding: 0px;\"><a href=\"http://mirror.neu6.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://mirror.neu6.edu.cn/</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;(IPv6 only)</span><br style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">电子科技大学：</span><a href=\"http://ubuntu.uestc.edu.cn/\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://ubuntu.uestc.edu.cn/</a><span style=\"margin: 0px; padding: 0px; line-height: 1.8;\"><br style=\"margin: 0px; padding: 0px;\"></span></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8; font-size: 16px;\"><strong style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.8; color: rgb(128, 0, 0);\">六、使用第三方软件库</span></strong></span></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">Centos/RHEL默认的yum软件仓库非常有限，仅仅限于发行版本那几张盘里面的常规包和一些软件包的更新，利用RpmForge，可以增加非常多的第三方rpm软件包。RpmForge库现在已经拥有超过10000种的CentOS的软件包，被CentOS社区认为是最安全也是最稳定的一个第三方软件库。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">1、安装yum-priorities插件</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">这个插件是用来设置yum在调用软件源时的顺序的。因为官方提供的软件源，都是比较稳定和被推荐使用的。因此，官方源的顺序要高于第三方源的顺序。如何保证这个顺序，就需要安装yum-priorities这插件了。</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># yum -y install yum-priorities</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/3816A910D9A038D513E0B0A54BA81B93.jpg\" alt=\"\" width=\"900\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">2、安装完yum-priorities插件后需要设置/etc/yum.repos.d/ 目录下的.repo相关文件（如CentOS-Base.repo），在这些文件中插入顺序指令：priority=N （N为1到99的正整数，数值越小越优先）</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">一般配置[base],&nbsp;[addons],&nbsp;[updates],&nbsp;[extras] 的priority=1，[CentOSplus],&nbsp;[contrib] 的priority=2，其他第三的软件源为：priority=N （推荐N&gt;10）</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">以CentOS-Base.repo 为例：</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\">[base]\nname=CentOS-$releasever - Base\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os\nbaseurl=http://ftp.sjtu.edu.cn/centos/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-5\npriority=1</pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">3、下载与安装相应rpmforge的rpm文件包</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># wget&nbsp;<a href=\"http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el5.rf.i386.rpm\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el5.rf.i386.rpm</a></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">4、安装DAG的PGP Key</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># rpm --import&nbsp;<a href=\"http://apt.sw.be/RPM-GPG-KEY.dag.txt\" style=\"margin: 0px; padding: 0px; text-decoration: none; color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: dotted; border-bottom-color: rgb(51, 51, 51);\">http://apt.sw.be/RPM-GPG-KEY.dag.txt</a></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">5、验证rpmforge的rpm文件包</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># rpm -K rpmforge-release-0.5.2-2.el5.rf.*.rpm</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">6、安装rpmforge的rpm文件包</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># rpm -i rpmforge-release-0.5.2-2.el5.rf.i386.rpm</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"><img src=\"quiver-image-url/66EDA62E4C73EB589C39962418594434.jpg\" alt=\"\" width=\"900\" style=\"margin: 0px; padding: 0px; border: 0px; max-width: 1000px;\"></p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">7、设置/etc/yum.repos.d/rpmforge.repo文件中源的级别</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">[root@TS-DEV yum.repos.d]# cat rpmforge.repo&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); widows: 1; background-color: rgb(245, 245, 245); font-family: 'Courier New' !important; font-size: 12px !important;\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div><pre style=\"padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;\">### Name: RPMforge RPM Repository for RHEL 5 - dag\n### URL: http://rpmforge.net/\n[rpmforge]\nname = RHEL $releasever - RPMforge.net - dag\nbaseurl = http://apt.sw.be/redhat/el5/en/$basearch/rpmforge\nmirrorlist = http://apt.sw.be/redhat/el5/en/mirrors-rpmforge\n#mirrorlist = file:///etc/yum.repos.d/mirrors-rpmforge\nenabled = 1\nprotect = 0\ngpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmforge-dag\ngpgcheck = 1\npriority=12</pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8;\"><a title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: none !important;\"><img src=\"quiver-image-url/51E409B11AA51C150090697429A953ED.gif\" alt=\"复制代码\" style=\"margin: 0px; padding: 0px; max-width: 1000px; border: none !important;\"></a></span></div></div><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\">8、测试安装</p><p style=\"margin: 10px auto; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 25.2px; widows: 1; background-color: rgb(255, 255, 255);\"># yum install htop</p>"
    }
  ]
}